# 音视频小白入门

## 常用工具

​	ffmpeg ffplay vlc

## 架构模型

​	推流 -> 流媒体服务器 -> 拉流工具

## 问题

### 推流失败，为什么？

​		ffmpeg -re -i  aa.mp4 -f rtmp://localhost/live/test

​		-re 保持原来的速度来播放

### 清晰度不高？

​	ffmpeg会按照默认的编码进行编码的 视频的质量就降低了

​	ffmpeg -re -i  aa.mp4 -c copy -f rtmp://localhost/live/test 拷贝原来的编码进行推送就清晰了

## linux环境变量

PATH 来配置ffmpeg命令

PKG_CONFIG_PATH 是让pkg-config命令使用来查找头文件和库 

​		export PKG_CONFIG_PATH=$PKG_CONFIG_PATH:/usr/local/Cellar/ffmpeg/4.3_3/lib/pkgconfig/

​		pkg-config --libs  --cflags libavutil

​			--libs: 怎么引用库

​			--cflags : 怎么引用头文件 

PKG_CONFIG_PATH与LD_LIBRARY_PATH区别

​		LD_LIBRARY_PATH，用于放置.so库，如果自己安装的.so库不在下，则需要加到该环境变量中，系统才能调用到该库

​		PKG_CONFIG_PATH，用于放置.pc库，同上

## 人类的听觉范围

​	20Hz~20KHz      1s中振动20次 到 1s中振动2万次 

​	音调:  音频的快慢  振动的快 音频就高  振动的慢 音频就低           音频越高也就是振动越快 声音越好听

​	音量:  振动的幅度  振动的幅度越大 音量就大 振动的幅度越小 音量就小

​	音色：谐波  不同乐器就有不同的音色  为什么会这样呢？就是因为谐波不一样

# 音频原始数据格式

PCM

WAV 这个是在PCM的基础上加了一个头   这个头包含了播放参数



量化的基本概念

采样大小： 一个采样用多少bit存放 常用的是16bit

采样率：    采样频率 8k、16k、32k、44.1k、48k      就是在模电转数电的时候采样率  采样率越高数字信号和模拟信号越接近

声道数： 单声道 双声道 多声道 

​				双声道：左耳听一种声音 右耳听另外一种声音

​				多声道 ：电脑外接设备弄了多个喇叭 在你四周 前后上下左右都放  每个喇叭放的声音不一样

PCM音频流的码率 = 采样大小\*采样率\*声道数  1s种采样的数据多少

​		44.1K x 16 x 2 = 1411.2Kb/s



WAV Header

​	包括三个部分  

​			1.RFF规范  数据块大小是多少  格式是什么

​			2.扩展部分

​			3.PCM数据

不同的设备采样设备不一样 采样的api就不一样

​	安卓

​	iOS 

​	windows

​	但是这些平台采集api ffmpeg帮我集成了提供了一套api 只要把ffmpeg采集api学会了就ok了

​	ffmpeg可以通过命令采集 

​			 ffmpeg -f avfoundation -i :0 out.wav (mac下)

​			 ffmpeg -f hisla -hw :0 out.wav (mac下)

​	也可以通过api采集 







​	