<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>万雍移动门户js sdk测试</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=0">
  <style type="text/css">
  body{margin: 0px;padding: 0px;line-height: 1.6;
        font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
        background-color: #f1f0f6;
  }
  ul,li,p,h1,h2,h3,h4,h5,h6{margin: 0px;padding: 0px;}
  .page{max-width: 640px;min-width: 320px;width: 100%;margin: 0 auto;
  	padding: 0px 10px;
  	box-sizing: border-box;
  }
  .page .title{padding-top: 16px;
        font-size: 20px;font-weight: bold;
        color: #3e3e3e;position: relative;
        text-align: center;

   }
   .page p{margin-bottom: 10px;line-height: 21px;font-size: 14px;}
  .demoUl{overflow: hidden;margin: 10px 0px;}
  .demoUl li{height: 35px;line-height: 35px;margin-bottom: 10px;width: 100%;
        text-align: center;color: #fff;background: #04be02;}
   img{max-width: 100%;height: auto;}

  </style>
<script type="text/javascript" src="../js/jquery-1.11.0.min.js"></script>
<script type="text/javascript" src="../js/mportal.js"></script>
  
</head>
<body>
	<div class="page">
		<div class="shareImg">
			<img src="imgShare.jpg"/>
		</div>

	    <h3 class="title">图片接口</h3>
	    <ul class="demoUl">
	        <li id="chooseImage">选择照片</li>
	        <li id="previewImage">预览图片</li>
	        <!--<li id="uploadImage">上传图片</li>-->
	        <!--<li id="downloadImage">下载图片</li>-->
	    </ul>

	    <h3 class="title">语音接口</h3>
	    <ul class="demoUl">
	    	<li id="startRecord">开始录音</li>
	    	<li id="stopRecord">停止录音</li>
	    	<li id="playVoice">播放语音</li>
	    	<li id="pauseVoice">暂停播放语音</li>
	    	<li id="stopVoice">停止播放</li>
	    	<li id="uploadVoice">上传语音</li>
	    	<!--<li id="downloadVoice">下载语音</li>-->
	    </ul>

	    <!--<h3 class="title">智能接口</h3>
	    <ul class="demoUl">
	    	<li id="translateVoice">识别语音</li>
	    </ul>-->

	    <h3 class="title">地理位置接口</h3>
	    <ul class="demoUl">
	    	<li id="location">获取当前地理位置接口</li>
	    	<li id="openLocation">查看地理位置</li>
	    </ul>

	    <h3 class="title">设备接口</h3>
	    <ul class="demoUl">
	    	<li class="" id="networkType">获取当前的网络状况</li>
	    	<li class="" id="getDeviceId">获取设备ID</li>
	    </ul>
	    
	    <h3 class="title">消息接口</h3>
	    <ul class="demoUl">
	    	<li id="pushMessage">消息推送</li>
	    	<li id="sendSMS">短信发送</li>
	    	<li id="sendEmail">邮件发送</li>
	    </ul>
	    
	    <h3 class="title">二维码接口</h3>
	    <ul class="demoUl">
	    	<li id="scanQRCode">扫一扫接口</li>
	    	<li id="scanQRCode1">扫一扫直接返回结果</li>
	    </ul>
	    
	    <h3 class="title">登录信息</h3>
	    <ul class="demoUl">
	    	<li id="getUserInfo">获取个人信息</li>
	    	<li id="getOrgInfo">获取组织机构信息</li>
	    </ul>
	    
	    <h3 class="title">其它接口</h3>
	    <ul class="demoUl">
			<li id="onMenuShare">分享</li>
	    	<li id="favorite">收藏</li>
	    	<li id="readContact">读取手机联系人</li>
	    	<li id="addContact">新增到手机联系人</li>
	    </ul>

	    <div id="imageList"></div>
	    <!--<P>1.页面调用ios为地址栏监听字符串</P>-->

    </div>
</body>
<script>
document.querySelector("#getUserInfo").onclick = function() {
  wy.getUserInfo({
     success: function(res) {
       alert(res.userName);
     }
  });
}

document.querySelector("#readContact").onclick = function() {
  wy.readContact({
     success: function(res) {
       alert(res.list[0].userName+":"+res.list[0].mobileNo);
     }
  });
}

document.querySelector("#addContact").onclick = function() {
  wy.addContact({
     userName: "张旭星",
     mobileNo: "13816041373",
     success: function(res) {
       alert(res.message);
     }
  });
}

document.querySelector("#getDeviceId").onclick = function() {
  wy.getDeviceId({
     success: function(res) {
      alert(res.deviceId);
     }
  });
}

document.querySelector("#getOrgInfo").onclick = function() {
  wy.getOrgInfo({
     success: function(res) {
       alert(res.orgName);
     }
  });
}

document.querySelector("#favorite").onclick = function() {
  wy.favorite({
     newsIds: "9152C546-FD80-4C5C-99D2-599E925DF8B6",
     userAccount: "13816041373",
     success: function(res) {
       alert(res.message);
     }
  });
}

document.querySelector("#sendEmail").onclick = function() {
  wy.sendEmail({
     content: "测试移动门户接口",
     addresses: "zhangxx@shwally.com",
     success: function(res) {
       alert(res.message);
     }
  });
}

document.querySelector("#pushMessage").onclick = function() {
  wy.pushMessage({
  	 sender:"admin",
     content: "测试移动门户接口",
     userAccounts: "13816041373,13816041374",
     success: function(res) {
       alert(res.message);
     }
  });
}

document.querySelector("#sendSMS").onclick = function() {
  wy.sendSMS({
     content: "测试万雍移动门户接口",
     mobileNos: "13816041373,15821921595",
     success: function(res) {
       alert(res.message);
     }
  });
}

				//开始录音
			document.querySelector("#startRecord").onclick = function() {
				wy.startRecord({
     success: function(res) {
       alert(res.message);
     }
				});
			}

			//停止录音
			document.querySelector("#stopRecord").onclick = function() {
					wy.stopRecord({
						success: function(res) {
							var localId = res.localId;
							voice.localId = localId;
							alert(localId);
						}
					})
				}

			var images = {
				localId: [],
				serverId: []
			};
			
			//语音接口
			var voice = {
					localId: [],
					serverId: []
				}

				//播放音频
			document.querySelector("#playVoice").onclick = function() {
					if (voice.localId.length <= 0) {
						alert("请先秀一段");
						return false;
					}
					wy.playVoice({
						localId: voice.localId,
     success: function(res) {
       alert(res.message);
     }
					})
				}
				//暂停播放
			document.querySelector("#pauseVoice").onclick = function() {
				wy.pauseVoice({
					localId: voice.localId,
     success: function(res) {
       alert(res.message);
     }
				})
			}

			//停止播放
			document.querySelector("#stopVoice").onclick = function() {
				wy.stopVoice({
					localId: voice.localId,
     success: function(res) {
       alert(res.message);
     }
				})
			}
			
document.querySelector('#chooseImage').onclick = function() {
	wy.chooseImage({
		success: function(res) {
						images.localId = res.localIds;
						var image = document.createElement("img");
						image.src = res.localIds;
						document.querySelector("#imageList").appendChild(image);
		}
	});
}

			/*
			document.querySelector("#uploadImage").onclick = function() {
				if (images.localId.length <= 0) {
					alert("请选择照片");
					return false;
				}
				var i = 0,
					len = images.localId.length;

				function upload() {
					wy.uploadImage({
						localId: images.localId[i],
						isShowProgressTips: 1,
						success: function(res) {
							i++;
							images.serverId.push(res.serverId);
							if (i < len) {
								upload();
							}
						},
						fail: function(res) {
							alert(JSON.stringify(res));
						}
					})
				}
				upload();
			}
			*/

			//上传语音接口
			document.querySelector("#uploadVoice").onclick = function() {
				if (voice.localId.length <= 0) {
					alert("姑舅你还没录音呢！")
					return false;
				}
				wy.uploadVoice({
					localId: voice.localId,
					isShowProgressTips: 1,
					success: function(res) {
						voice.serverId = res.serverId;
					}
				})
			}

document.querySelector('#scanQRCode1').onclick = function() {
	wy.scanQRCode1({
		success: function(res) {
			alert(res.message);
		}
	});
}

document.querySelector('#scanQRCode').onclick = function() {
	wy.scanQRCode({
	});
}

document.querySelector('#onMenuShare').onclick = function() {
	wy.onMenuShare({
		shareContent : ">Web APP H5页面技术研讨会大纲：一，Web APP依托的软硬件环境二，H5页面的层次结构...",
		targetUrl : "http://huodongzhinan.com/jsps/json/invitation?confferenceId=AB8DB45F-49E0-41E6-AA18-3C8CC5B0B2C7&currentRoot=bd387b03-facb-4328-b586-dcfb56213d0b",
		title : "Web APP H5页面技术研讨会",
		shareImage : "http://huodongzhinan.com/upload/93ee7d6c-5c1f-4253-a0a2-227b3edff07b.jpg"
	});
}

			//获取设备信息
			//获取网络的状态接口
			document.querySelector("#networkType").onclick = function() {
				wy.networkType({
					success: function(res) {
						var network = res.NetworkType;
						alert(network);
					}
				})
			}

			//地理位置接口
			//获取地理位置
			document.querySelector("#location").onclick = function() {
					wy.location({
						success: function(res) {
							alert("纬度:"+res.latitude);
							alert("经度:"+res.longitude);
							alert("位置名称:"+res.address);
						}
					})
				}

				//查看地理位置
			document.querySelector("#openLocation").onclick = function() {
				wy.openLocation({
				})
			}
			
			document.querySelector("#previewImage").onclick = function() {
				wy.previewImage({
					current: "http://img5.douban.com/view/photo/photo/public/p1353993776.jpg",
					urls: [
						"http://img3.douban.com/view/photo/photo/public/p2152117150.jpg",
						"http://img3.douban.com/view/photo/photo/public/p2152117150.jpg"
					]
				})
			}
</script>
</html>
